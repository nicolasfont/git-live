#!/usr/bin/env sh
while :
do
  git add -A .
  git commit -m "${git diff --cached --name-only}" >> /dev/null

  if [[ $? -eq 0 ]];
  then
    git push -q >> /dev/null
  fi

  git pull >> /dev/null
  
  if [[ $? -ne 0 ]];
  then
    git reset --hard origin/master >> /dev/null
    git clean -dff
  fi
done

